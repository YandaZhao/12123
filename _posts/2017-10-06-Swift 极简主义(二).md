---
layout: post
title: 'Swift 极简主义(二)'
subtitle: '重载运算符和自定义运算符'
date: 2017-10-06
categories: 技术
cover: 'https://zhaoyanda-blog.oss-cn-qingdao.aliyuncs.com/%E5%8D%9A%E5%AE%A2%E5%B0%81%E9%9D%A2/Swift%E6%9E%81%E7%AE%80%E4%B8%BB%E4%B9%89%28%E4%BA%8C%292.jpg'
tags: Swift
---

## 重载运算符
`Swift`相比于`Objective-C`增加了函数(方法)的重载, 在`Swift`中运算符的本质其实也是一个函数, 所以说`Swift`中的运算符也是支持重载的.

举个例子

<pre><code class="language-swift">
public struct Point {
    var x = 0.0
    var y = 0.0
}

var p1 = Point(x: 1, y: 1)
var p2 = Point(x: 2, y: 2)
var p3 = Point(x: p1.x + p2.x, y: p1.y + p2.y)

print(p3)
// 打印: Point(x: 3.0, y: 3.0)
</code></pre>

定义了一个表示二维空间点的结构体, 一次两次的写是没有问题的, 但是如果可以的话, 我们更希望有一个让两个`Point`相加的运算符, 我们先看下`+`号在`Swift`中的定义:

<pre><code class="language-swift">
public static func +(lhs: Double, rhs: Double) -> Double
public static func +(lhs: Int, rhs: Int) -> Int
</code></pre>

根据重载的规则不难写出:

<pre><code class="language-swift">
static public func +(lhs: Point, rhs: Point) -> Point {
    return Point(x: lhs.x + rhs.x, y: lhs.y + rhs.y)
}
</code></pre>

然后把这个方法放进`Point`结构体内, 最后效果如下:

<pre><code class="language-swift">
public struct Point {
    var x = 0.0
    var y = 0.0
    
    static public func +(lhs: Point, rhs: Point) -> Point {
        return Point(x: lhs.x + rhs.x, y: lhs.y + rhs.y)
    }
}

var p1 = Point(x: 1, y: 1)
var p2 = Point(x: 2, y: 2)
var p3 = p1 + p2

print(p3)
// 打印: Point(x: 3.0, y: 3.0)
</code></pre>

可以看出重载了`Swift`中的自有运算符可以非常有效的简化项目中的冗余代码.



